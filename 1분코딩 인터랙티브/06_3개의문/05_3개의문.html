<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3개의문</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/03_3개의문.css">
</head>
<body>
    <div class="stage">
        <div class="door">
            <div class="door-back">
                <div class="ilbuni"></div>
            </div>
            
            <div class="door-body"></div>
        </div>
        <div class="door">
            <div class="door-back">
                <div class="ilbuni"></div>
            </div>
            
            <div class="door-body"></div>
        </div>
        <div class="door">
            <div class="door-back">
                <div class="ilbuni"></div>
            </div>
            
            <div class="door-body"></div>
        </div>
    </div>
    <script>
        (function(){
            //1.stage클래스 불러오기
        const stageElem = document.querySelector('.stage');
        //현재 활성화된 아이템을 저장
        let currentItem;
       
        //활성화
        function activate(elem){
          elem.classList.add('door-opened'); 
            currentItem = elem;
        }
       
        //비활성화
        function inactivate(elem){
            elem.classList.remove('door-opened');  
        }

       
        function doorHandler(e){
           const targetElem = e.target;

          if(currentItem){
            inactivate(currentItem);
          }
           
          if(targetElem.classList.contains('door-body')){
            activate(targetElem.parentNode);
            } 
           
        }

        stageElem.addEventListener('click', doorHandler);

        activate(document.querySelector('.door:first-child'));
        }) ();
    </script>
</body>
</html>